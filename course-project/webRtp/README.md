# WebRtp

Проект реализует систему обзвона абонентов, подключенных к виртуальной АТС с возможностью передачи голосовых сообщений. Проект также предоставляет REST API для осуществления обзвона абонентов и добавления/удаления/получения данных об абонентах из БД.

###  REST API
Реализованы handler`s для обработки запросов.
Маршруты:
```erlang
{"/abonent/[:number]", abonent_h, []},
{"/abonents", abonents_h, []}, 
{"/call/abonent/[:number]", call_abonent_h, []}, 
{"/call/broadcast", broadcast_h, []}
```
Обрабатываемые запросы:
```
GET /abonent/[:number]
DELETE /abonent/[:number]
POST /abonent
GET /abonents
GET /call/abonent/[:number]
GET /call/broadcast
```
### webRtp_mnesia.erl - Модуль для работы с Mnesia
Модуль предоставляет API работы с стандартными операциями в БД.

Реализованы следующие API функции:
* start/0, stop/0 - Запускает/Останавливает БД.
* insert_abonent/2, delete_abonent/1 - Добавляет/Удаляет абонента по ключу.
* get_abonent/1, get_all_abonents/0 - Возращает конкретного абонента по ключу или список всех абонентов

### webRtp_nksip.erl - Модуль для работы с SIP-клиентом.
Модуль используется для обработки запросов SIP, в частности регистрация и вызов.

Реализованы следующие API функции:
* start/0 - Запускает службу nksip при старте приложения.
* register/1 - Регистрирует абонента по номеру.
* call_abonent/1 - Совершает звонок абоненту по номеру.

### Docker
В проекте реализован Docker контейнер с необходимыми инструкциями
для создания образа в контексте которого работает приложение.

Для того, чтобы _**запустить**_ проект, необходимо выполнить команду:
```erlang
docker build -t webrtp .
docker run -p 8080:8080 webrtp 
```
### *Примечания 
* Приложение регистрируется как 101 абонент и совершает вызовы на другие абоненты, которых предоставляет АТС ECSS10  